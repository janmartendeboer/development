version: "3.9"
name: dev

services:
  php:
    user: "${UID}:${GID}"
    build:
      context: docker/php
      args:
        UID: $UID
        GID: $GID
        PHP_VERSION: 8.2
        PHP_EXTENSIONS: apcu intl opcache zip pdo_mysql xdebug
    environment:
      - "HOME=${PHP_HOME}"
    volumes:
      - "${PWD}:/app"

  composer:
    extends:
      service: php
    entrypoint: composer
    build:
      args:
        COMPOSER_VERSION: 2
        PHP_EXTENSIONS: apcu intl opcache zip pdo_mysql
    environment:
      - "COMPOSER_HOME=${PHP_COMPOSER_HOME}"
    volumes:
      - "${COMPOSER_HOME}:${PHP_COMPOSER_HOME}"

  symfony:
    extends:
      service: composer
    build:
      args:
        SYMFONY: 1
        GIT: 1
        PHP_EXTENSIONS: apcu intl opcache zip pdo_mysql
    entrypoint: symfony